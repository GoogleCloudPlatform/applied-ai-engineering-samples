
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="This repository contains code samples and best practices from Google Cloud  Applied AI Engineering, focusing on building scalable and efficient AI systems on Google Cloud.">
      
      
        <meta name="author" content="Applied AI Engineering, Google Cloud">
      
      
        <link rel="canonical" href="https://googlecloudplatform.github.io/applied-ai-engineering-samples/ai-infrastructure/terraform-modules/gke-aiml/">
      
      
        <link rel="prev" href="../bootstrap/">
      
      
        <link rel="next" href="../kueue-config/">
      
      
      <link rel="icon" href="../../../assets/aaie_favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.16">
    
    
      
        <title>GKE AIML - Google Cloud Applied AI Engineering</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.7e37652d.min.css">
      
        
        <link rel="stylesheet" href="../../../assets/stylesheets/palette.06af60db.min.css">
      
      
  
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
  
  <style>:root{--md-admonition-icon--note:url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M1%207.775V2.75C1%201.784%201.784%201%202.75%201h5.025c.464%200%20.91.184%201.238.513l6.25%206.25a1.75%201.75%200%200%201%200%202.474l-5.026%205.026a1.75%201.75%200%200%201-2.474%200l-6.25-6.25A1.75%201.75%200%200%201%201%207.775m1.5%200c0%20.066.026.13.073.177l6.25%206.25a.25.25%200%200%200%20.354%200l5.025-5.025a.25.25%200%200%200%200-.354l-6.25-6.25a.25.25%200%200%200-.177-.073H2.75a.25.25%200%200%200-.25.25ZM6%205a1%201%200%201%201%200%202%201%201%200%200%201%200-2%22/%3E%3C/svg%3E');--md-admonition-icon--abstract:url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M2.5%201.75v11.5c0%20.138.112.25.25.25h3.17a.75.75%200%200%201%200%201.5H2.75A1.75%201.75%200%200%201%201%2013.25V1.75C1%20.784%201.784%200%202.75%200h8.5C12.216%200%2013%20.784%2013%201.75v7.736a.75.75%200%200%201-1.5%200V1.75a.25.25%200%200%200-.25-.25h-8.5a.25.25%200%200%200-.25.25m13.274%209.537zl-4.557%204.45a.75.75%200%200%201-1.055-.008l-1.943-1.95a.75.75%200%200%201%201.062-1.058l1.419%201.425%204.026-3.932a.75.75%200%201%201%201.048%201.074M4.75%204h4.5a.75.75%200%200%201%200%201.5h-4.5a.75.75%200%200%201%200-1.5M4%207.75A.75.75%200%200%201%204.75%207h2a.75.75%200%200%201%200%201.5h-2A.75.75%200%200%201%204%207.75%22/%3E%3C/svg%3E');--md-admonition-icon--info:url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M0%208a8%208%200%201%201%2016%200A8%208%200%200%201%200%208m8-6.5a6.5%206.5%200%201%200%200%2013%206.5%206.5%200%200%200%200-13M6.5%207.75A.75.75%200%200%201%207.25%207h1a.75.75%200%200%201%20.75.75v2.75h.25a.75.75%200%200%201%200%201.5h-2a.75.75%200%200%201%200-1.5h.25v-2h-.25a.75.75%200%200%201-.75-.75M8%206a1%201%200%201%201%200-2%201%201%200%200%201%200%202%22/%3E%3C/svg%3E');--md-admonition-icon--tip:url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M3.499.75a.75.75%200%200%201%201.5%200v.996C5.9%202.903%206.793%203.65%207.662%204.376l.24.202c-.036-.694.055-1.422.426-2.163C9.1.873%2010.794-.045%2012.622.26%2014.408.558%2016%201.94%2016%204.25c0%201.278-.954%202.575-2.44%202.734l.146.508.065.22c.203.701.412%201.455.476%202.226.142%201.707-.4%203.03-1.487%203.898C11.714%2014.671%2010.27%2015%208.75%2015h-6a.75.75%200%200%201%200-1.5h1.376a4.5%204.5%200%200%201-.563-1.191%203.84%203.84%200%200%201-.05-2.063%204.65%204.65%200%200%201-2.025-.293.75.75%200%200%201%20.525-1.406c1.357.507%202.376-.006%202.698-.318l.009-.01a.747.747%200%200%201%201.06%200%20.75.75%200%200%201-.012%201.074c-.912.92-.992%201.835-.768%202.586.221.74.745%201.337%201.196%201.621H8.75c1.343%200%202.398-.296%203.074-.836.635-.507%201.036-1.31.928-2.602-.05-.603-.216-1.224-.422-1.93l-.064-.221c-.12-.407-.246-.84-.353-1.29a2.4%202.4%200%200%201-.507-.441%203.1%203.1%200%200%201-.633-1.248.75.75%200%200%201%201.455-.364c.046.185.144.436.31.627.146.168.353.305.712.305.738%200%201.25-.615%201.25-1.25%200-1.47-.95-2.315-2.123-2.51-1.172-.196-2.227.387-2.706%201.345-.46.92-.27%201.774.019%203.062l.042.19.01.05c.348.443.666.949.94%201.553a.75.75%200%201%201-1.365.62c-.553-1.217-1.32-1.94-2.3-2.768L6.7%205.527c-.814-.68-1.75-1.462-2.692-2.619a3.7%203.7%200%200%200-1.023.88c-.406.495-.663%201.036-.722%201.508.116.122.306.21.591.239.388.038.797-.06%201.032-.19a.75.75%200%200%201%20.728%201.31c-.515.287-1.23.439-1.906.373-.682-.067-1.473-.38-1.879-1.193L.75%205.677V5.5c0-.984.48-1.94%201.077-2.664.46-.559%201.05-1.055%201.673-1.353z%22/%3E%3C/svg%3E');--md-admonition-icon--success:url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M13.78%204.22a.75.75%200%200%201%200%201.06l-7.25%207.25a.75.75%200%200%201-1.06%200L2.22%209.28a.75.75%200%200%201%20.018-1.042.75.75%200%200%201%201.042-.018L6%2010.94l6.72-6.72a.75.75%200%200%201%201.06%200%22/%3E%3C/svg%3E');--md-admonition-icon--question:url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M0%208a8%208%200%201%201%2016%200A8%208%200%200%201%200%208m8-6.5a6.5%206.5%200%201%200%200%2013%206.5%206.5%200%200%200%200-13M6.92%206.085h.001a.749.749%200%201%201-1.342-.67c.169-.339.436-.701.849-.977C6.845%204.16%207.369%204%208%204a2.76%202.76%200%200%201%201.637.525c.503.377.863.965.863%201.725%200%20.448-.115.83-.329%201.15-.205.307-.47.513-.692.662-.109.072-.22.138-.313.195l-.006.004a6%206%200%200%200-.26.16%201%201%200%200%200-.276.245.75.75%200%200%201-1.248-.832c.184-.264.42-.489.692-.661q.154-.1.313-.195l.007-.004c.1-.061.182-.11.258-.161a1%201%200%200%200%20.277-.245C8.96%206.514%209%206.427%209%206.25a.61.61%200%200%200-.262-.525A1.27%201.27%200%200%200%208%205.5c-.369%200-.595.09-.74.187a1%201%200%200%200-.34.398M9%2011a1%201%200%201%201-2%200%201%201%200%200%201%202%200%22/%3E%3C/svg%3E');--md-admonition-icon--warning:url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M6.457%201.047c.659-1.234%202.427-1.234%203.086%200l6.082%2011.378A1.75%201.75%200%200%201%2014.082%2015H1.918a1.75%201.75%200%200%201-1.543-2.575Zm1.763.707a.25.25%200%200%200-.44%200L1.698%2013.132a.25.25%200%200%200%20.22.368h12.164a.25.25%200%200%200%20.22-.368Zm.53%203.996v2.5a.75.75%200%200%201-1.5%200v-2.5a.75.75%200%200%201%201.5%200M9%2011a1%201%200%201%201-2%200%201%201%200%200%201%202%200%22/%3E%3C/svg%3E');--md-admonition-icon--failure:url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M2.344%202.343za8%208%200%200%201%2011.314%2011.314A8.002%208.002%200%200%201%20.234%2010.089a8%208%200%200%201%202.11-7.746m1.06%2010.253a6.5%206.5%200%201%200%209.108-9.275%206.5%206.5%200%200%200-9.108%209.275M6.03%204.97%208%206.94l1.97-1.97a.749.749%200%200%201%201.275.326.75.75%200%200%201-.215.734L9.06%208l1.97%201.97a.749.749%200%200%201-.326%201.275.75.75%200%200%201-.734-.215L8%209.06l-1.97%201.97a.749.749%200%200%201-1.275-.326.75.75%200%200%201%20.215-.734L6.94%208%204.97%206.03a.75.75%200%200%201%20.018-1.042.75.75%200%200%201%201.042-.018%22/%3E%3C/svg%3E');--md-admonition-icon--danger:url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M9.504.43a1.516%201.516%200%200%201%202.437%201.713L10.415%205.5h2.123c1.57%200%202.346%201.909%201.22%203.004l-7.34%207.142a1.25%201.25%200%200%201-.871.354h-.302a1.25%201.25%200%200%201-1.157-1.723L5.633%2010.5H3.462c-1.57%200-2.346-1.909-1.22-3.004zm1.047%201.074L3.286%208.571A.25.25%200%200%200%203.462%209H6.75a.75.75%200%200%201%20.694%201.034l-1.713%204.188%206.982-6.793A.25.25%200%200%200%2012.538%207H9.25a.75.75%200%200%201-.683-1.06l2.008-4.418.003-.006-.004-.009-.006-.006-.008-.001q-.005%200-.009.004%22/%3E%3C/svg%3E');--md-admonition-icon--bug:url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M4.72.22a.75.75%200%200%201%201.06%200l1%20.999a3.5%203.5%200%200%201%202.441%200l.999-1a.748.748%200%200%201%201.265.332.75.75%200%200%201-.205.729l-.775.776c.616.63.995%201.493.995%202.444v.327q0%20.15-.025.292c.408.14.764.392%201.029.722l1.968-.787a.75.75%200%200%201%20.556%201.392L13%207.258V9h2.25a.75.75%200%200%201%200%201.5H13v.5q-.002.615-.141%201.186l2.17.868a.75.75%200%200%201-.557%201.392l-2.184-.873A5%205%200%200%201%208%2016a5%205%200%200%201-4.288-2.427l-2.183.873a.75.75%200%200%201-.558-1.392l2.17-.868A5%205%200%200%201%203%2011v-.5H.75a.75.75%200%200%201%200-1.5H3V7.258L.971%206.446a.75.75%200%200%201%20.558-1.392l1.967.787c.265-.33.62-.583%201.03-.722a1.7%201.7%200%200%201-.026-.292V4.5c0-.951.38-1.814.995-2.444L4.72%201.28a.75.75%200%200%201%200-1.06m.53%206.28a.75.75%200%200%200-.75.75V11a3.5%203.5%200%201%200%207%200V7.25a.75.75%200%200%200-.75-.75ZM6.173%205h3.654A.17.17%200%200%200%2010%204.827V4.5a2%202%200%201%200-4%200v.327c0%20.096.077.173.173.173%22/%3E%3C/svg%3E');--md-admonition-icon--example:url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M5%205.782V2.5h-.25a.75.75%200%200%201%200-1.5h6.5a.75.75%200%200%201%200%201.5H11v3.282l3.666%205.76C15.619%2013.04%2014.543%2015%2012.767%2015H3.233c-1.776%200-2.852-1.96-1.899-3.458Zm-2.4%206.565a.75.75%200%200%200%20.633%201.153h9.534a.75.75%200%200%200%20.633-1.153L12.225%2010.5h-8.45ZM9.5%202.5h-3V6c0%20.143-.04.283-.117.403L4.73%209h6.54L9.617%206.403A.75.75%200%200%201%209.5%206Z%22/%3E%3C/svg%3E');--md-admonition-icon--quote:url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M1.75%202.5h10.5a.75.75%200%200%201%200%201.5H1.75a.75.75%200%200%201%200-1.5m4%205h8.5a.75.75%200%200%201%200%201.5h-8.5a.75.75%200%200%201%200-1.5m0%205h8.5a.75.75%200%200%201%200%201.5h-8.5a.75.75%200%200%201%200-1.5M2.5%207.75v6a.75.75%200%200%201-1.5%200v-6a.75.75%200%200%201%201.5%200%22/%3E%3C/svg%3E');}</style>



    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Open Sans";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../../docs/stylesheets/extra.css">
    
    <script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      
  


  
  

<script id="__analytics">function __md_analytics(){function e(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],e("js",new Date),e("config","G-6T56LKHEP0"),document.addEventListener("DOMContentLoaded",(function(){document.forms.search&&document.forms.search.query.addEventListener("blur",(function(){this.value&&e("event","search",{search_term:this.value})}));document$.subscribe((function(){var t=document.forms.feedback;if(void 0!==t)for(var a of t.querySelectorAll("[type=submit]"))a.addEventListener("click",(function(a){a.preventDefault();var n=document.location.pathname,d=this.getAttribute("data-md-value");e("event","feedback",{page:n,data:d}),t.firstElementChild.disabled=!0;var r=t.querySelector(".md-feedback__note [data-md-value='"+d+"']");r&&(r.hidden=!1)})),t.hidden=!1})),location$.subscribe((function(t){e("config","G-6T56LKHEP0",{page_path:t.pathname})}))}));var t=document.createElement("script");t.async=!0,t.src="https://www.googletagmanager.com/gtag/js?id=G-6T56LKHEP0",document.getElementById("__analytics").insertAdjacentElement("afterEnd",t)}</script>
  
    <script>"undefined"!=typeof __md_analytics&&__md_analytics()</script>
  

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#gke-for-large-model-training-and-serving" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow md-header--lifted" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../.." title="Google Cloud Applied AI Engineering" class="md-header__button md-logo" aria-label="Google Cloud Applied AI Engineering" data-md-component="logo">
      
  <img src="../../../assets/aaie_favicon.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Google Cloud Applied AI Engineering
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              GKE AIML
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme)" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1M8 13h8v-2H8zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4a5 5 0 0 0 5-5 5 5 0 0 0-5-5"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_2" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="black" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_2">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
          <a href="javascript:void(0)" class="md-search__icon md-icon" title="Share" aria-label="Share" data-clipboard data-clipboard-text="" data-md-component="search-share" tabindex="-1">
            
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91s2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08"/></svg>
          </a>
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/GoogleCloudPlatform/applied-ai-engineering-samples" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill="currentColor" d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    GoogleCloudPlatform/applied-ai-engineering-samples
  </div>
</a>
      </div>
    
  </nav>
  
    
      
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../.." class="md-tabs__link">
        
  
  
    
  
  Home

      </a>
    </li>
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../genai-on-vertex-ai/" class="md-tabs__link">
          
  
  
    
  
  GenAI on Vertex AI

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../research-operationalization/" class="md-tabs__link">
          
  
  
    
  
  Research Operationalization

        </a>
      </li>
    
  

      
        
  
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../../" class="md-tabs__link">
          
  
  
    
  
  AI Infrastructure

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
    
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../.." title="Google Cloud Applied AI Engineering" class="md-nav__button md-logo" aria-label="Google Cloud Applied AI Engineering" data-md-component="logo">
      
  <img src="../../../assets/aaie_favicon.png" alt="logo">

    </a>
    Google Cloud Applied AI Engineering
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/GoogleCloudPlatform/applied-ai-engineering-samples" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill="currentColor" d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    GoogleCloudPlatform/applied-ai-engineering-samples
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Home
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
  
    <a href="../../../genai-on-vertex-ai/" class="md-nav__link">
      
  
  
  <span class="md-ellipsis">
    GenAI on Vertex AI
    
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
    
    
    
      
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
  
    <a href="../../../research-operationalization/" class="md-nav__link">
      
  
  
  <span class="md-ellipsis">
    Research Operationalization
    
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
      
        
          
        
      
        
      
        
      
    
    
    
      
        
        
      
      
    
    
      
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" checked>
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    AI Infrastructure
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_4" id="__nav_4_label" tabindex="">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            AI Infrastructure
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
    
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
      
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_2" checked>
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../bootstrap/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Terraform Modules
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_4_2" id="__nav_4_2_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_2_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_4_2">
            <span class="md-nav__icon md-icon"></span>
            Terraform Modules
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    GKE AIML
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    GKE AIML
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#examples" class="md-nav__link">
    <span class="md-ellipsis">
      Examples
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Examples">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#gke-tpu-training-environment" class="md-nav__link">
    <span class="md-ellipsis">
      GKE TPU training environment
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gke-gpu-training-environment" class="md-nav__link">
    <span class="md-ellipsis">
      GKE GPU training environment
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#variables" class="md-nav__link">
    <span class="md-ellipsis">
      Variables
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Variables">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#specifying-tpu-type" class="md-nav__link">
    <span class="md-ellipsis">
      Specifying TPU type
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#outputs" class="md-nav__link">
    <span class="md-ellipsis">
      Outputs
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../kueue-config/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Kueue Config
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../metrics-tracking/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Metrics Tracking
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../workload-identity/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Workload Identity
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
    
    
    
      
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
  
    <a href="../../tpu-training-on-gke/" class="md-nav__link">
      
  
  
  <span class="md-ellipsis">
    TPU Training on GKE
    
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#examples" class="md-nav__link">
    <span class="md-ellipsis">
      Examples
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Examples">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#gke-tpu-training-environment" class="md-nav__link">
    <span class="md-ellipsis">
      GKE TPU training environment
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gke-gpu-training-environment" class="md-nav__link">
    <span class="md-ellipsis">
      GKE GPU training environment
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#variables" class="md-nav__link">
    <span class="md-ellipsis">
      Variables
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Variables">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#specifying-tpu-type" class="md-nav__link">
    <span class="md-ellipsis">
      Specifying TPU type
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#outputs" class="md-nav__link">
    <span class="md-ellipsis">
      Outputs
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


  
    <a href="https://github.com/GoogleCloudPlatform/applied-ai-engineering-samples/edit/master/docs/ai-infrastructure/terraform-modules/gke-aiml/README.md" title="Edit this page" class="md-content__button md-icon" rel="edit">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M10 20H6V4h7v5h5v3.1l2-2V8l-6-6H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h4zm10.2-7c.1 0 .3.1.4.2l1.3 1.3c.2.2.2.6 0 .8l-1 1-2.1-2.1 1-1c.1-.1.2-.2.4-.2m0 3.9L14.1 23H12v-2.1l6.1-6.1z"/></svg>
    </a>
  
  
    
      
    
    <a href="https://github.com/GoogleCloudPlatform/applied-ai-engineering-samples/raw/master/docs/ai-infrastructure/terraform-modules/gke-aiml/README.md" title="View source of this page" class="md-content__button md-icon">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 18c.56 0 1 .44 1 1s-.44 1-1 1-1-.44-1-1 .44-1 1-1m0-3c-2.73 0-5.06 1.66-6 4 .94 2.34 3.27 4 6 4s5.06-1.66 6-4c-.94-2.34-3.27-4-6-4m0 6.5a2.5 2.5 0 0 1-2.5-2.5 2.5 2.5 0 0 1 2.5-2.5 2.5 2.5 0 0 1 2.5 2.5 2.5 2.5 0 0 1-2.5 2.5M9.27 20H6V4h7v5h5v4.07c.7.08 1.36.25 2 .49V8l-6-6H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h4.5a8.2 8.2 0 0 1-1.23-2"/></svg>
    </a>
  


<h1 id="gke-for-large-model-training-and-serving">GKE for Large Model Training and Serving<a class="headerlink" href="#gke-for-large-model-training-and-serving" title="Permanent link">&para;</a></h1>
<p>This Terraform module configures a GKE-based infrastructure environment specifically designed for training and serving large and extremely large deep learning models, including the most recent Generative AI models.</p>
<p>The central element of this environment is a VPC-native GKE Standard cluster.  Users of the module can decide whether to deploy the cluster within an existing VPC or create a new VPC specifically for the cluster. The cluster can be configured with multiple CPU, GPU or TPU node pools. The node pools use a custom service account. This service account can be an existing one or a newly created account.</p>
<p>Beyond the cluster, users have the option to create additional services such as Artifact Registry or Cloud Storage buckets.</p>
<p>The module carries out the following tasks:
- If a reference to an existing VPC is not provided, it will create a network, a subnet, and IP ranges for GKE pods and services.
- Optionally, it can provision <a href="https://cloud.google.com/nat/docs/overview">Cloud NAT</a>
- If a reference to an existing service account is not provided, the module will create a new service account and assign it to a user-defined set of security roles.
- Deploys a standard, VPC-native GKE cluster that is configured to utilize Workload Identity.
- Creates a user defined number of CPU node pools
- Creates a user defined number of TPU node pools
- Creates a user defined number of GPU node pools
- The node pools are configured to use a custom service account
- Optionally, it can create an Artifact Registry.
- Creates the specified number of user-defined Cloud Storage buckets.</p>
<h2 id="examples">Examples<a class="headerlink" href="#examples" title="Permanent link">&para;</a></h2>
<h3 id="gke-tpu-training-environment">GKE TPU training environment<a class="headerlink" href="#gke-tpu-training-environment" title="Permanent link">&para;</a></h3>
<p>This example demonstrates how to configure an environment optimized for executing large-scale training workloads on TPUs. In this sample, a new VPC, a new service account, and a new Artifact Registry are created. All resources are generated using default values for the majority of the settings.</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-0-1"><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a>module &quot;tpu-training-cluster&quot; {
</span><span id="__span-0-2"><a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a>    source     = &quot;github.com/GoogleCloudPlatform/applied-ai-engineering-samples//ai-infrastructure/terraform-modules/gke-aiml
</span><span id="__span-0-3"><a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a>    project_id = &quot;project_id&quot;
</span><span id="__span-0-4"><a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a>    region     = &quot;us-central2&quot;
</span><span id="__span-0-5"><a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a>    vpc_config = {
</span><span id="__span-0-6"><a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a>        network_name = &quot;gke-cluster-network&quot;
</span><span id="__span-0-7"><a id="__codelineno-0-7" name="__codelineno-0-7" href="#__codelineno-0-7"></a>        subnet_name  = &quot;gke-cluster-subnetwork&quot;
</span><span id="__span-0-8"><a id="__codelineno-0-8" name="__codelineno-0-8" href="#__codelineno-0-8"></a>    }
</span><span id="__span-0-9"><a id="__codelineno-0-9" name="__codelineno-0-9" href="#__codelineno-0-9"></a>    node_pool_sa = {
</span><span id="__span-0-10"><a id="__codelineno-0-10" name="__codelineno-0-10" href="#__codelineno-0-10"></a>        name = &quot;gke-node-pool-sa&quot;
</span><span id="__span-0-11"><a id="__codelineno-0-11" name="__codelineno-0-11" href="#__codelineno-0-11"></a>    }
</span><span id="__span-0-12"><a id="__codelineno-0-12" name="__codelineno-0-12" href="#__codelineno-0-12"></a>    cluster_config = {
</span><span id="__span-0-13"><a id="__codelineno-0-13" name="__codelineno-0-13" href="#__codelineno-0-13"></a>        name = &quot;gke-tpu-training-cluster&quot;
</span><span id="__span-0-14"><a id="__codelineno-0-14" name="__codelineno-0-14" href="#__codelineno-0-14"></a>    }
</span><span id="__span-0-15"><a id="__codelineno-0-15" name="__codelineno-0-15" href="#__codelineno-0-15"></a>    cpu_node_pools = {
</span><span id="__span-0-16"><a id="__codelineno-0-16" name="__codelineno-0-16" href="#__codelineno-0-16"></a>        default-cpu-node-pool = {
</span><span id="__span-0-17"><a id="__codelineno-0-17" name="__codelineno-0-17" href="#__codelineno-0-17"></a>            zones  = [&quot;us-central2-a&quot;]
</span><span id="__span-0-18"><a id="__codelineno-0-18" name="__codelineno-0-18" href="#__codelineno-0-18"></a>            labels = {
</span><span id="__span-0-19"><a id="__codelineno-0-19" name="__codelineno-0-19" href="#__codelineno-0-19"></a>                default-node-pool=true
</span><span id="__span-0-20"><a id="__codelineno-0-20" name="__codelineno-0-20" href="#__codelineno-0-20"></a>            }
</span><span id="__span-0-21"><a id="__codelineno-0-21" name="__codelineno-0-21" href="#__codelineno-0-21"></a>        }
</span><span id="__span-0-22"><a id="__codelineno-0-22" name="__codelineno-0-22" href="#__codelineno-0-22"></a>    }
</span><span id="__span-0-23"><a id="__codelineno-0-23" name="__codelineno-0-23" href="#__codelineno-0-23"></a>    tpu_node_pools = {
</span><span id="__span-0-24"><a id="__codelineno-0-24" name="__codelineno-0-24" href="#__codelineno-0-24"></a>        tpu-v4-16-podslice-1 = {
</span><span id="__span-0-25"><a id="__codelineno-0-25" name="__codelineno-0-25" href="#__codelineno-0-25"></a>            zones    = [&quot;us-central2-b&quot;]
</span><span id="__span-0-26"><a id="__codelineno-0-26" name="__codelineno-0-26" href="#__codelineno-0-26"></a>            tpu_type = &quot;v4-16&quot;
</span><span id="__span-0-27"><a id="__codelineno-0-27" name="__codelineno-0-27" href="#__codelineno-0-27"></a>        }
</span><span id="__span-0-28"><a id="__codelineno-0-28" name="__codelineno-0-28" href="#__codelineno-0-28"></a>        tpu-v4-16-podslice-2 = {
</span><span id="__span-0-29"><a id="__codelineno-0-29" name="__codelineno-0-29" href="#__codelineno-0-29"></a>           zones    = [&quot;us-central2-b&quot;]
</span><span id="__span-0-30"><a id="__codelineno-0-30" name="__codelineno-0-30" href="#__codelineno-0-30"></a>            tpu_type = &quot;v4-16&quot;
</span><span id="__span-0-31"><a id="__codelineno-0-31" name="__codelineno-0-31" href="#__codelineno-0-31"></a>        }
</span><span id="__span-0-32"><a id="__codelineno-0-32" name="__codelineno-0-32" href="#__codelineno-0-32"></a>    }
</span><span id="__span-0-33"><a id="__codelineno-0-33" name="__codelineno-0-33" href="#__codelineno-0-33"></a>    gcs_configs = {
</span><span id="__span-0-34"><a id="__codelineno-0-34" name="__codelineno-0-34" href="#__codelineno-0-34"></a>      training-artifacts-bucket = {} 
</span><span id="__span-0-35"><a id="__codelineno-0-35" name="__codelineno-0-35" href="#__codelineno-0-35"></a>    }
</span><span id="__span-0-36"><a id="__codelineno-0-36" name="__codelineno-0-36" href="#__codelineno-0-36"></a>    registry_config = {
</span><span id="__span-0-37"><a id="__codelineno-0-37" name="__codelineno-0-37" href="#__codelineno-0-37"></a>        name     = &quot;training-images&quot;
</span><span id="__span-0-38"><a id="__codelineno-0-38" name="__codelineno-0-38" href="#__codelineno-0-38"></a>        location = &quot;us&quot;
</span><span id="__span-0-39"><a id="__codelineno-0-39" name="__codelineno-0-39" href="#__codelineno-0-39"></a>    }
</span><span id="__span-0-40"><a id="__codelineno-0-40" name="__codelineno-0-40" href="#__codelineno-0-40"></a>}
</span></code></pre></div>
<h3 id="gke-gpu-training-environment">GKE GPU training environment<a class="headerlink" href="#gke-gpu-training-environment" title="Permanent link">&para;</a></h3>
<p>This example demonstrates how to configure an environment optimized for executing large-scale training workloads on GPUs. In this sample, a new VPC, a new service account, and a new Artifact Registry are created. All resources are generated using default values for the majority of the settings. You can use all the GPU machine types and accelerator types available to you. Those are the ones supported: <a href="https://cloud.google.com/compute/docs/gpus">GPU doc</a></p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-1-1"><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a>module &quot;gpu-training-cluster&quot; {
</span><span id="__span-1-2"><a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a>    source     = &quot;github.com/GoogleCloudPlatform/applied-ai-engineering-samples//ai-infrastructure/terraform-modules/gke-aiml
</span><span id="__span-1-3"><a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a>    project_id = &quot;project_id&quot;
</span><span id="__span-1-4"><a id="__codelineno-1-4" name="__codelineno-1-4" href="#__codelineno-1-4"></a>    region     = &quot;us-central1&quot;
</span><span id="__span-1-5"><a id="__codelineno-1-5" name="__codelineno-1-5" href="#__codelineno-1-5"></a>    vpc_config = {
</span><span id="__span-1-6"><a id="__codelineno-1-6" name="__codelineno-1-6" href="#__codelineno-1-6"></a>        network_name = &quot;gke-cluster-network&quot;
</span><span id="__span-1-7"><a id="__codelineno-1-7" name="__codelineno-1-7" href="#__codelineno-1-7"></a>        subnet_name  = &quot;gke-cluster-subnetwork&quot;
</span><span id="__span-1-8"><a id="__codelineno-1-8" name="__codelineno-1-8" href="#__codelineno-1-8"></a>    }
</span><span id="__span-1-9"><a id="__codelineno-1-9" name="__codelineno-1-9" href="#__codelineno-1-9"></a>    node_pool_sa = {
</span><span id="__span-1-10"><a id="__codelineno-1-10" name="__codelineno-1-10" href="#__codelineno-1-10"></a>        name = &quot;gke-node-pool-sa&quot;
</span><span id="__span-1-11"><a id="__codelineno-1-11" name="__codelineno-1-11" href="#__codelineno-1-11"></a>    }
</span><span id="__span-1-12"><a id="__codelineno-1-12" name="__codelineno-1-12" href="#__codelineno-1-12"></a>    cluster_config = {
</span><span id="__span-1-13"><a id="__codelineno-1-13" name="__codelineno-1-13" href="#__codelineno-1-13"></a>        name = &quot;gke-gpu-training-cluster&quot;
</span><span id="__span-1-14"><a id="__codelineno-1-14" name="__codelineno-1-14" href="#__codelineno-1-14"></a>    }
</span><span id="__span-1-15"><a id="__codelineno-1-15" name="__codelineno-1-15" href="#__codelineno-1-15"></a>    gpu_node_pools = {
</span><span id="__span-1-16"><a id="__codelineno-1-16" name="__codelineno-1-16" href="#__codelineno-1-16"></a>    l4-gpu-node-pool = {
</span><span id="__span-1-17"><a id="__codelineno-1-17" name="__codelineno-1-17" href="#__codelineno-1-17"></a>      zones          = [&quot;us-central1-a&quot;]
</span><span id="__span-1-18"><a id="__codelineno-1-18" name="__codelineno-1-18" href="#__codelineno-1-18"></a>      min_node_count = 1
</span><span id="__span-1-19"><a id="__codelineno-1-19" name="__codelineno-1-19" href="#__codelineno-1-19"></a>      max_node_count = 2
</span><span id="__span-1-20"><a id="__codelineno-1-20" name="__codelineno-1-20" href="#__codelineno-1-20"></a>      machine_type   = &quot;g2-standard-4&quot;
</span><span id="__span-1-21"><a id="__codelineno-1-21" name="__codelineno-1-21" href="#__codelineno-1-21"></a>      accelerator_type = &quot;nvidia-l4&quot;
</span><span id="__span-1-22"><a id="__codelineno-1-22" name="__codelineno-1-22" href="#__codelineno-1-22"></a>      accelerator_count=1
</span><span id="__span-1-23"><a id="__codelineno-1-23" name="__codelineno-1-23" href="#__codelineno-1-23"></a>      disk_size_gb   = 200
</span><span id="__span-1-24"><a id="__codelineno-1-24" name="__codelineno-1-24" href="#__codelineno-1-24"></a>      taints         = {}
</span><span id="__span-1-25"><a id="__codelineno-1-25" name="__codelineno-1-25" href="#__codelineno-1-25"></a>      labels         = {}
</span><span id="__span-1-26"><a id="__codelineno-1-26" name="__codelineno-1-26" href="#__codelineno-1-26"></a>    }
</span><span id="__span-1-27"><a id="__codelineno-1-27" name="__codelineno-1-27" href="#__codelineno-1-27"></a>  }
</span><span id="__span-1-28"><a id="__codelineno-1-28" name="__codelineno-1-28" href="#__codelineno-1-28"></a>    gcs_configs = {
</span><span id="__span-1-29"><a id="__codelineno-1-29" name="__codelineno-1-29" href="#__codelineno-1-29"></a>      training-artifacts-bucket = {} 
</span><span id="__span-1-30"><a id="__codelineno-1-30" name="__codelineno-1-30" href="#__codelineno-1-30"></a>    }
</span><span id="__span-1-31"><a id="__codelineno-1-31" name="__codelineno-1-31" href="#__codelineno-1-31"></a>    registry_config = {
</span><span id="__span-1-32"><a id="__codelineno-1-32" name="__codelineno-1-32" href="#__codelineno-1-32"></a>        name     = &quot;training-images&quot;
</span><span id="__span-1-33"><a id="__codelineno-1-33" name="__codelineno-1-33" href="#__codelineno-1-33"></a>        location = &quot;us&quot;
</span><span id="__span-1-34"><a id="__codelineno-1-34" name="__codelineno-1-34" href="#__codelineno-1-34"></a>    }
</span><span id="__span-1-35"><a id="__codelineno-1-35" name="__codelineno-1-35" href="#__codelineno-1-35"></a>}
</span></code></pre></div>
<h2 id="variables">Variables<a class="headerlink" href="#variables" title="Permanent link">&para;</a></h2>
<table>
<thead>
<tr>
<th>Name</th>
<th>Description</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href="variables.tf#L16">project_id</a></td>
<td>Environment project ID</td>
<td><code>string</code></td>
<td>&check;</td>
<td></td>
</tr>
<tr>
<td><a href="variables.tf#L22">region</a></td>
<td>Environment region</td>
<td><code>string</code></td>
<td>&check;</td>
<td></td>
</tr>
<tr>
<td><a href="variables.tf#L28">deletion_protection</a></td>
<td>Prevent Terraform from destroying data storage resources (storage buckets, GKE clusters). When this field is set, a terraform destroy or terraform apply that would delete data storage resources will fail.</td>
<td><code>string</code></td>
<td></td>
<td><code>true</code></td>
</tr>
<tr>
<td><a href="variables.tf#L106">cluster_config</a></td>
<td>Cluster level configurations</td>
<td><code>object({...})</code></td>
<td></td>
<td><code>{...}</code></td>
</tr>
<tr>
<td><a href="variables.tf#L90">vpc_config</a></td>
<td>Network configurations of a VPC to create. Must be specified if vpc_reg is null</td>
<td><code>object({...})</code></td>
<td></td>
<td><code>{...}</code></td>
</tr>
<tr>
<td><a href="variables.tf#L78">vpc_ref</a></td>
<td>Settings for the  existing VPC to use for the environment. If null, a new VPC based on the <code>vpc_config</code> will be created</td>
<td><code>object({...})</code></td>
<td></td>
<td><code>{...}</code></td>
</tr>
<tr>
<td><a href="variables.tf#L57">node_pool_sa</a></td>
<td>Settings for a node pool service account</td>
<td><code>object({...})</code></td>
<td></td>
<td><code>{...}</code></td>
</tr>
<tr>
<td><a href="variables.tf#L125">cpu_node_pools</a></td>
<td>Settings for CPU node pools</td>
<td><code>map(object({...}))</code></td>
<td></td>
<td><code>{...}</code></td>
</tr>
<tr>
<td><a href="variables.tf#L156">tpu_node_pools</a></td>
<td>Settings for TPU node pools. See below for more information about TPU slice types</td>
<td><code>map(object({...}))</code></td>
<td></td>
<td><code>{...}</code></td>
</tr>
<tr>
<td><a href="variables.tf#L193">gpu_node_pools</a></td>
<td>Settings for GPU node pools</td>
<td><code>map(object({...}))</code></td>
<td></td>
<td><code>{...}</code></td>
</tr>
<tr>
<td><a href="variables.tf#L35">gcs_configs</a></td>
<td>Settings for Cloud Storage buckets</td>
<td><code>map(object({...}))</code></td>
<td></td>
<td><code>{...}</code></td>
</tr>
<tr>
<td><a href="variables.tf#L47">registry_config</a></td>
<td>Settings for Artifact Registry</td>
<td><code>object({...})</code></td>
<td></td>
<td><code>{...}</code></td>
</tr>
</tbody>
</table>
<h3 id="specifying-tpu-type">Specifying TPU type<a class="headerlink" href="#specifying-tpu-type" title="Permanent link">&para;</a></h3>
<p>When configuring TPU node pools, ensure that you set the TPU type to one of the following values:</p>
<table>
<thead>
<tr>
<th>TPU type name</th>
<th>Slice type</th>
<th>Slice topology</th>
<th>TPU VM type</th>
<th>Number of VMs in a slice</th>
<th>Number of chips in a VM</th>
</tr>
</thead>
<tbody>
<tr>
<td>v5litepod-1</td>
<td>tpu-v5-lite-podslice</td>
<td>1x1</td>
<td>ct5lp-hightpu-1</td>
<td>1</td>
<td>1</td>
</tr>
<tr>
<td>v5litepod-4</td>
<td>tpu-v5-lite-podslice</td>
<td>2x2</td>
<td>ct5lp-hightpu-4t</td>
<td>1</td>
<td>4</td>
</tr>
<tr>
<td>v5litepod-8</td>
<td>tpu-v5-lite-podslice</td>
<td>2x4</td>
<td>ct5lp-hightpu-4t</td>
<td>1</td>
<td>8</td>
</tr>
<tr>
<td>v5litepod-16</td>
<td>tpu-v5-lite-podslice</td>
<td>4x4</td>
<td>ct5lp-hightpu-4t</td>
<td>4</td>
<td>4</td>
</tr>
<tr>
<td>v5litepod-32</td>
<td>tpu-v5-lite-podslice</td>
<td>4x8</td>
<td>ct5lp-hightpu-4t</td>
<td>8</td>
<td>4</td>
</tr>
<tr>
<td>v5litepod-64</td>
<td>tpu-v5-lite-podslice</td>
<td>8x8</td>
<td>ct5lp-hightpu-4t</td>
<td>16</td>
<td>4</td>
</tr>
<tr>
<td>v5litepod-128</td>
<td>tpu-v5-lite-podslice</td>
<td>8x16</td>
<td>ct5lp-hightpu-4t</td>
<td>32</td>
<td>4</td>
</tr>
<tr>
<td>v5litepod-256</td>
<td>tpu-v5-lite-podslice</td>
<td>16x16</td>
<td>ct5lp-hightpu-4t</td>
<td>64</td>
<td>4</td>
</tr>
<tr>
<td>v4-8</td>
<td>tpu-v4-podslice</td>
<td>2x2x1</td>
<td>ct4p-hightpu-4t</td>
<td>1</td>
<td>4</td>
</tr>
<tr>
<td>v4-16</td>
<td>tpu-v4-podslice</td>
<td>2x2x2</td>
<td>ct4p-hightpu-4t</td>
<td>2</td>
<td>4</td>
</tr>
<tr>
<td>v4-32</td>
<td>tpu-v4-podslice</td>
<td>2x2x4</td>
<td>ct4p-hightpu-4t</td>
<td>4</td>
<td>4</td>
</tr>
<tr>
<td>v4-64</td>
<td>tpu-v4-podslice</td>
<td>2x4x4</td>
<td>ct4p-hightpu-4t</td>
<td>8</td>
<td>4</td>
</tr>
<tr>
<td>v4-128</td>
<td>tpu-v4-podslice</td>
<td>4x4x4</td>
<td>ct4p-hightpu-4t</td>
<td>16</td>
<td>4</td>
</tr>
<tr>
<td>v4-256</td>
<td>tpu-v4-podslice</td>
<td>4x4x8</td>
<td>ct4p-hightpu-4t</td>
<td>32</td>
<td>4</td>
</tr>
<tr>
<td>v4-512</td>
<td>tpu-v4-podslice</td>
<td>4x8x8</td>
<td>ct4p-hightpu-4t</td>
<td>64</td>
<td>4</td>
</tr>
<tr>
<td>v4-1024</td>
<td>tpu-v4-podslice</td>
<td>8x8x8</td>
<td>ct4p-hightpu-4t</td>
<td>128</td>
<td>4</td>
</tr>
<tr>
<td>v4-1536</td>
<td>tpu-v4-podslice</td>
<td>8x8x12</td>
<td>ct4p-hightpu-4t</td>
<td>192</td>
<td>4</td>
</tr>
<tr>
<td>v4-2048</td>
<td>tpu-v4-podslice</td>
<td>8x8x16</td>
<td>ct4p-hightpu-4t</td>
<td>256</td>
<td>4</td>
</tr>
<tr>
<td>v4-4096</td>
<td>tpu-v4-podslice</td>
<td>8x16x16</td>
<td>ct4p-hightpu-4t</td>
<td>512</td>
<td>4</td>
</tr>
<tr>
<td>v5p-8</td>
<td>tpu-v5p-slice</td>
<td>2x2x1</td>
<td>ct5p-hightpu-4t</td>
<td>1</td>
<td>4</td>
</tr>
<tr>
<td>v5p-16</td>
<td>tpu-v5p-slice</td>
<td>2x2x2</td>
<td>ct5p-hightpu-4t</td>
<td>2</td>
<td>4</td>
</tr>
<tr>
<td>v5p-32</td>
<td>tpu-v5p-slice</td>
<td>2x2x4</td>
<td>ct5p-hightpu-4t</td>
<td>4</td>
<td>4</td>
</tr>
<tr>
<td>v5p-64</td>
<td>tpu-v5p-slice</td>
<td>2x4x4</td>
<td>ct5p-hightpu-4t</td>
<td>8</td>
<td>4</td>
</tr>
<tr>
<td>v5p-128</td>
<td>tpu-v5p-slice</td>
<td>4x4x4</td>
<td>ct5p-hightpu-4t</td>
<td>16</td>
<td>4</td>
</tr>
<tr>
<td>v5p-256</td>
<td>tpu-v5p-slice</td>
<td>4x4x8</td>
<td>ct5p-hightpu-4t</td>
<td>32</td>
<td>4</td>
</tr>
<tr>
<td>v5p-384</td>
<td>tpu-v5p-slice</td>
<td>4x4x12</td>
<td>ct5p-hightpu-4t</td>
<td>48</td>
<td>4</td>
</tr>
<tr>
<td>v5p-512</td>
<td>tpu-v5p-slice</td>
<td>4x8x8</td>
<td>ct5p-hightpu-4t</td>
<td>64</td>
<td>4</td>
</tr>
<tr>
<td>v5p-640</td>
<td>tpu-v5p-slice</td>
<td>4x4x20</td>
<td>ct5p-hightpu-4t</td>
<td>80</td>
<td>4</td>
</tr>
<tr>
<td>v5p-768</td>
<td>tpu-v5p-slice</td>
<td>4x8x12</td>
<td>ct5p-hightpu-4t</td>
<td>96</td>
<td>4</td>
</tr>
<tr>
<td>v5p-896</td>
<td>tpu-v5p-slice</td>
<td>4x4x28</td>
<td>ct5p-hightpu-4t</td>
<td>112</td>
<td>4</td>
</tr>
<tr>
<td>v5p-1024</td>
<td>tpu-v5p-slice</td>
<td>8x8x8</td>
<td>ct5p-hightpu-4t</td>
<td>128</td>
<td>4</td>
</tr>
<tr>
<td>v5p-1152</td>
<td>tpu-v5p-slice</td>
<td>4x12x12</td>
<td>ct5p-hightpu-4t</td>
<td>144</td>
<td>4</td>
</tr>
<tr>
<td>v5p-1280</td>
<td>tpu-v5p-slice</td>
<td>4x8x20</td>
<td>ct5p-hightpu-4t</td>
<td>160</td>
<td>4</td>
</tr>
<tr>
<td>v5p-1408</td>
<td>tpu-v5p-slice</td>
<td>4x4x44</td>
<td>ct5p-hightpu-4t</td>
<td>176</td>
<td>4</td>
</tr>
<tr>
<td>v5p-1536</td>
<td>tpu-v5p-slice</td>
<td>8x8x12</td>
<td>ct5p-hightpu-4t</td>
<td>192</td>
<td>4</td>
</tr>
<tr>
<td>v5p-1664</td>
<td>tpu-v5p-slice</td>
<td>4x4x52</td>
<td>ct5p-hightpu-4t</td>
<td>208</td>
<td>4</td>
</tr>
<tr>
<td>v5p-1792</td>
<td>tpu-v5p-slice</td>
<td>4x8x28</td>
<td>ct5p-hightpu-4t</td>
<td>224</td>
<td>4</td>
</tr>
<tr>
<td>v5p-1920</td>
<td>tpu-v5p-slice</td>
<td>4x12x20</td>
<td>ct5p-hightpu-4t</td>
<td>240</td>
<td>4</td>
</tr>
<tr>
<td>v5p-2048</td>
<td>tpu-v5p-slice</td>
<td>8x8x16</td>
<td>ct5p-hightpu-4t</td>
<td>256</td>
<td>4</td>
</tr>
<tr>
<td>v5p-2176</td>
<td>tpu-v5p-slice</td>
<td>4x4x68</td>
<td>ct5p-hightpu-4t</td>
<td>272</td>
<td>4</td>
</tr>
<tr>
<td>v5p-2304</td>
<td>tpu-v5p-slice</td>
<td>8x12x12</td>
<td>ct5p-hightpu-4t</td>
<td>288</td>
<td>4</td>
</tr>
<tr>
<td>v5p-2432</td>
<td>tpu-v5p-slice</td>
<td>4x4x76</td>
<td>ct5p-hightpu-4t</td>
<td>304</td>
<td>4</td>
</tr>
<tr>
<td>v5p-2560</td>
<td>tpu-v5p-slice</td>
<td>8x8x20</td>
<td>ct5p-hightpu-4t</td>
<td>320</td>
<td>4</td>
</tr>
<tr>
<td>v5p-2688</td>
<td>tpu-v5p-slice</td>
<td>4x12x28</td>
<td>ct5p-hightpu-4t</td>
<td>336</td>
<td>4</td>
</tr>
<tr>
<td>v5p-2816</td>
<td>tpu-v5p-slice</td>
<td>4x8x44</td>
<td>ct5p-hightpu-4t</td>
<td>352</td>
<td>4</td>
</tr>
<tr>
<td>v5p-2944</td>
<td>tpu-v5p-slice</td>
<td>4x4x92</td>
<td>ct5p-hightpu-4t</td>
<td>368</td>
<td>4</td>
</tr>
<tr>
<td>v5p-3072</td>
<td>tpu-v5p-slice</td>
<td>4x12x16</td>
<td>ct5p-hightpu-4t</td>
<td>384</td>
<td>4</td>
</tr>
<tr>
<td>v5p-3200</td>
<td>tpu-v5p-slice</td>
<td>4x20x20</td>
<td>ct5p-hightpu-4t</td>
<td>400</td>
<td>4</td>
</tr>
<tr>
<td>v5p-3328</td>
<td>tpu-v5p-slice</td>
<td>4x8x52</td>
<td>ct5p-hightpu-4t</td>
<td>416</td>
<td>4</td>
</tr>
<tr>
<td>v5p-3456</td>
<td>tpu-v5p-slice</td>
<td>12x12x12</td>
<td>ct5p-hightpu-4t</td>
<td>432</td>
<td>4</td>
</tr>
<tr>
<td>v5p-3584</td>
<td>tpu-v5p-slice</td>
<td>8x8x28</td>
<td>ct5p-hightpu-4t</td>
<td>448</td>
<td>4</td>
</tr>
<tr>
<td>v5p-3712</td>
<td>tpu-v5p-slice</td>
<td>4x4x116</td>
<td>ct5p-hightpu-4t</td>
<td>464</td>
<td>4</td>
</tr>
<tr>
<td>v5p-3840</td>
<td>tpu-v5p-slice</td>
<td>8x12x20</td>
<td>ct5p-hightpu-4t</td>
<td>480</td>
<td>4</td>
</tr>
<tr>
<td>v5p-3968</td>
<td>tpu-v5p-slice</td>
<td>4x4x124</td>
<td>ct5p-hightpu-4t</td>
<td>496</td>
<td>4</td>
</tr>
<tr>
<td>v5p-4096</td>
<td>tpu-v5p-slice</td>
<td>8x16x16</td>
<td>ct5p-hightpu-4t</td>
<td>512</td>
<td>4</td>
</tr>
<tr>
<td>v5p-4224</td>
<td>tpu-v5p-slice</td>
<td>4x12x44</td>
<td>ct5p-hightpu-4t</td>
<td>528</td>
<td>4</td>
</tr>
<tr>
<td>v5p-4352</td>
<td>tpu-v5p-slice</td>
<td>4x8x68</td>
<td>ct5p-hightpu-4t</td>
<td>544</td>
<td>4</td>
</tr>
<tr>
<td>v5p-4480</td>
<td>tpu-v5p-slice</td>
<td>4x20x28</td>
<td>ct5p-hightpu-4t</td>
<td>560</td>
<td>4</td>
</tr>
<tr>
<td>v5p-4608</td>
<td>tpu-v5p-slice</td>
<td>12x12x16</td>
<td>ct5p-hightpu-4t</td>
<td>576</td>
<td>4</td>
</tr>
<tr>
<td>v5p-4736</td>
<td>tpu-v5p-slice</td>
<td>4x4x148</td>
<td>ct5p-hightpu-4t</td>
<td>592</td>
<td>4</td>
</tr>
<tr>
<td>v5p-4864</td>
<td>tpu-v5p-slice</td>
<td>4x8x76</td>
<td>ct5p-hightpu-4t</td>
<td>608</td>
<td>4</td>
</tr>
<tr>
<td>v5p-4992</td>
<td>tpu-v5p-slice</td>
<td>4x12x52</td>
<td>ct5p-hightpu-4t</td>
<td>624</td>
<td>4</td>
</tr>
<tr>
<td>v5p-5120</td>
<td>tpu-v5p-slice</td>
<td>8x16x20</td>
<td>ct5p-hightpu-4t</td>
<td>640</td>
<td>4</td>
</tr>
<tr>
<td>v5p-5248</td>
<td>tpu-v5p-slice</td>
<td>4x4x164</td>
<td>ct5p-hightpu-4t</td>
<td>656</td>
<td>4</td>
</tr>
<tr>
<td>v5p-5376</td>
<td>tpu-v5p-slice</td>
<td>8x12x28</td>
<td>ct5p-hightpu-4t</td>
<td>672</td>
<td>4</td>
</tr>
<tr>
<td>v5p-5504</td>
<td>tpu-v5p-slice</td>
<td>4x4x172</td>
<td>ct5p-hightpu-4t</td>
<td>688</td>
<td>4</td>
</tr>
<tr>
<td>v5p-5632</td>
<td>tpu-v5p-slice</td>
<td>8x8x44</td>
<td>ct5p-hightpu-4t</td>
<td>704</td>
<td>4</td>
</tr>
<tr>
<td>v5p-5760</td>
<td>tpu-v5p-slice</td>
<td>12x12x20</td>
<td>ct5p-hightpu-4t</td>
<td>720</td>
<td>4</td>
</tr>
<tr>
<td>v5p-5888</td>
<td>tpu-v5p-slice</td>
<td>4x8x92</td>
<td>ct5p-hightpu-4t</td>
<td>736</td>
<td>4</td>
</tr>
<tr>
<td>v5p-6016</td>
<td>tpu-v5p-slice</td>
<td>4x4x188</td>
<td>ct5p-hightpu-4t</td>
<td>752</td>
<td>4</td>
</tr>
<tr>
<td>v5p-6144</td>
<td>tpu-v5p-slice</td>
<td>12x16x16</td>
<td>ct5p-hightpu-4t</td>
<td>768</td>
<td>4</td>
</tr>
<tr>
<td>v5p-6272</td>
<td>tpu-v5p-slice</td>
<td>4x28x28</td>
<td>ct5p-hightpu-4t</td>
<td>784</td>
<td>4</td>
</tr>
<tr>
<td>v5p-6400</td>
<td>tpu-v5p-slice</td>
<td>8x20x20</td>
<td>ct5p-hightpu-4t</td>
<td>800</td>
<td>4</td>
</tr>
<tr>
<td>v5p-6528</td>
<td>tpu-v5p-slice</td>
<td>4x12x68</td>
<td>ct5p-hightpu-4t</td>
<td>816</td>
<td>4</td>
</tr>
<tr>
<td>v5p-6656</td>
<td>tpu-v5p-slice</td>
<td>8x8x52</td>
<td>ct5p-hightpu-4t</td>
<td>832</td>
<td>4</td>
</tr>
<tr>
<td>v5p-6784</td>
<td>tpu-v5p-slice</td>
<td>4x4x212</td>
<td>ct5p-hightpu-4t</td>
<td>848</td>
<td>4</td>
</tr>
<tr>
<td>v5p-6912</td>
<td>tpu-v5p-slice</td>
<td>12x12x24</td>
<td>ct5p-hightpu-4t</td>
<td>864</td>
<td>4</td>
</tr>
<tr>
<td>v5p-7040</td>
<td>tpu-v5p-slice</td>
<td>4x20x44</td>
<td>ct5p-hightpu-4t</td>
<td>880</td>
<td>4</td>
</tr>
<tr>
<td>v5p-7168</td>
<td>tpu-v5p-slice</td>
<td>8x16x28</td>
<td>ct5p-hightpu-4t</td>
<td>896</td>
<td>4</td>
</tr>
<tr>
<td>v5p-7296</td>
<td>tpu-v5p-slice</td>
<td>4x12x76</td>
<td>ct5p-hightpu-4t</td>
<td>912</td>
<td>4</td>
</tr>
<tr>
<td>v5p-7424</td>
<td>tpu-v5p-slice</td>
<td>4x8x116</td>
<td>ct5p-hightpu-4t</td>
<td>928</td>
<td>4</td>
</tr>
<tr>
<td>v5p-7552</td>
<td>tpu-v5p-slice</td>
<td>4x4x236</td>
<td>ct5p-hightpu-4t</td>
<td>944</td>
<td>4</td>
</tr>
<tr>
<td>v5p-7680</td>
<td>tpu-v5p-slice</td>
<td>12x16x20</td>
<td>ct5p-hightpu-4t</td>
<td>960</td>
<td>4</td>
</tr>
<tr>
<td>v5p-7808</td>
<td>tpu-v5p-slice</td>
<td>4x4x244</td>
<td>ct5p-hightpu-4t</td>
<td>976</td>
<td>4</td>
</tr>
<tr>
<td>v5p-7936</td>
<td>tpu-v5p-slice</td>
<td>4x8x124</td>
<td>ct5p-hightpu-4t</td>
<td>992</td>
<td>4</td>
</tr>
<tr>
<td>v5p-8064</td>
<td>tpu-v5p-slice</td>
<td>12x12x28</td>
<td>ct5p-hightpu-4t</td>
<td>1008</td>
<td>4</td>
</tr>
<tr>
<td>v5p-8192</td>
<td>tpu-v5p-slice</td>
<td>16x16x16</td>
<td>ct5p-hightpu-4t</td>
<td>1024</td>
<td>4</td>
</tr>
<tr>
<td>v5p-8320</td>
<td>tpu-v5p-slice</td>
<td>4x20x52</td>
<td>ct5p-hightpu-4t</td>
<td>1040</td>
<td>4</td>
</tr>
<tr>
<td>v5p-8448</td>
<td>tpu-v5p-slice</td>
<td>8x12x44</td>
<td>ct5p-hightpu-4t</td>
<td>1056</td>
<td>4</td>
</tr>
<tr>
<td>v5p-8704</td>
<td>tpu-v5p-slice</td>
<td>8x8x68</td>
<td>ct5p-hightpu-4t</td>
<td>1088</td>
<td>4</td>
</tr>
<tr>
<td>v5p-8832</td>
<td>tpu-v5p-slice</td>
<td>4x12x92</td>
<td>ct5p-hightpu-4t</td>
<td>1104</td>
<td>4</td>
</tr>
<tr>
<td>v5p-8960</td>
<td>tpu-v5p-slice</td>
<td>8x20x28</td>
<td>ct5p-hightpu-4t</td>
<td>1120</td>
<td>4</td>
</tr>
<tr>
<td>v5p-9216</td>
<td>tpu-v5p-slice</td>
<td>12x16x24</td>
<td>ct5p-hightpu-4t</td>
<td>1152</td>
<td>4</td>
</tr>
<tr>
<td>v5p-9472</td>
<td>tpu-v5p-slice</td>
<td>4x8x148</td>
<td>ct5p-hightpu-4t</td>
<td>1184</td>
<td>4</td>
</tr>
<tr>
<td>v5p-9600</td>
<td>tpu-v5p-slice</td>
<td>12x20x20</td>
<td>ct5p-hightpu-4t</td>
<td>1200</td>
<td>4</td>
</tr>
<tr>
<td>v5p-9728</td>
<td>tpu-v5p-slice</td>
<td>8x8x76</td>
<td>ct5p-hightpu-4t</td>
<td>1216</td>
<td>4</td>
</tr>
<tr>
<td>v5p-9856</td>
<td>tpu-v5p-slice</td>
<td>4x28x44</td>
<td>ct5p-hightpu-4t</td>
<td>1232</td>
<td>4</td>
</tr>
<tr>
<td>v5p-9984</td>
<td>tpu-v5p-slice</td>
<td>8x12x52</td>
<td>ct5p-hightpu-4t</td>
<td>1248</td>
<td>4</td>
</tr>
<tr>
<td>v5p-10240</td>
<td>tpu-v5p-slice</td>
<td>16x16x20</td>
<td>ct5p-hightpu-4t</td>
<td>1280</td>
<td>4</td>
</tr>
<tr>
<td>v5p-10368</td>
<td>tpu-v5p-slice</td>
<td>12x12x36</td>
<td>ct5p-hightpu-4t</td>
<td>1296</td>
<td>4</td>
</tr>
<tr>
<td>v5p-10496</td>
<td>tpu-v5p-slice</td>
<td>4x8x164</td>
<td>ct5p-hightpu-4t</td>
<td>1312</td>
<td>4</td>
</tr>
<tr>
<td>v5p-10752</td>
<td>tpu-v5p-slice</td>
<td>12x16x28</td>
<td>ct5p-hightpu-4t</td>
<td>1344</td>
<td>4</td>
</tr>
<tr>
<td>v5p-10880</td>
<td>tpu-v5p-slice</td>
<td>4x20x68</td>
<td>ct5p-hightpu-4t</td>
<td>1360</td>
<td>4</td>
</tr>
<tr>
<td>v5p-11008</td>
<td>tpu-v5p-slice</td>
<td>4x8x172</td>
<td>ct5p-hightpu-4t</td>
<td>1376</td>
<td>4</td>
</tr>
<tr>
<td>v5p-11136</td>
<td>tpu-v5p-slice</td>
<td>4x12x116</td>
<td>ct5p-hightpu-4t</td>
<td>1392</td>
<td>4</td>
</tr>
<tr>
<td>v5p-11264</td>
<td>tpu-v5p-slice</td>
<td>8x16x44</td>
<td>ct5p-hightpu-4t</td>
<td>1408</td>
<td>4</td>
</tr>
<tr>
<td>v5p-11520</td>
<td>tpu-v5p-slice</td>
<td>12x20x24</td>
<td>ct5p-hightpu-4t</td>
<td>1440</td>
<td>4</td>
</tr>
<tr>
<td>v5p-11648</td>
<td>tpu-v5p-slice</td>
<td>4x28x52</td>
<td>ct5p-hightpu-4t</td>
<td>1456</td>
<td>4</td>
</tr>
<tr>
<td>v5p-11776</td>
<td>tpu-v5p-slice</td>
<td>8x8x92</td>
<td>ct5p-hightpu-4t</td>
<td>1472</td>
<td>4</td>
</tr>
<tr>
<td>v5p-11904</td>
<td>tpu-v5p-slice</td>
<td>4x12x124</td>
<td>ct5p-hightpu-4t</td>
<td>1488</td>
<td>4</td>
</tr>
<tr>
<td>v5p-12032</td>
<td>tpu-v5p-slice</td>
<td>4x8x188</td>
<td>ct5p-hightpu-4t</td>
<td>1504</td>
<td>4</td>
</tr>
<tr>
<td>v5p-12160</td>
<td>tpu-v5p-slice</td>
<td>4x20x76</td>
<td>ct5p-hightpu-4t</td>
<td>1520</td>
<td>4</td>
</tr>
<tr>
<td>v5p-12288</td>
<td>tpu-v5p-slice</td>
<td>16x16x24</td>
<td>ct5p-hightpu-4t</td>
<td>1536</td>
<td>4</td>
</tr>
<tr>
<td>v5p-13824</td>
<td>tpu-v5p-slice</td>
<td>12x24x24</td>
<td>ct5p-hightpu-4t</td>
<td>1728</td>
<td>4</td>
</tr>
<tr>
<td>v5p-17920</td>
<td>tpu-v5p-slice</td>
<td>16x20x28</td>
<td>ct5p-hightpu-4t</td>
<td>2240</td>
<td>4</td>
</tr>
</tbody>
</table>
<h2 id="outputs">Outputs<a class="headerlink" href="#outputs" title="Permanent link">&para;</a></h2>
<table>
<thead>
<tr>
<th>Name</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href="outputs.tf#L16">node_pool_sa_email</a></td>
<td>The email of the node pool sa</td>
</tr>
<tr>
<td><a href="outputs.tf#L21">cluster_name</a></td>
<td>The name of the GKE cluster</td>
</tr>
<tr>
<td><a href="outputs.tf#L26">cluster_region</a></td>
<td>The region of the GKE cluster</td>
</tr>
<tr>
<td><a href="outputs.tf#L31">gcs_buckets</a></td>
<td>The names and locations of the created GCS buckets</td>
</tr>
<tr>
<td><a href="outputs.tf#L38">artifact_registry_id</a></td>
<td>The full ID of the created Arifact Registry</td>
</tr>
<tr>
<td><a href="outputs.tf#L43">artifact_registry_image_path</a></td>
<td>Artifact Registry path</td>
</tr>
</tbody>
</table>









  



  <form class="md-feedback" name="feedback" hidden>
    <fieldset>
      <legend class="md-feedback__title">
        Was this page helpful?
      </legend>
      <div class="md-feedback__inner">
        <div class="md-feedback__list">
          
            <button class="md-feedback__icon md-icon" type="submit" title="This page was helpful" data-md-value="1">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M5 9v12H1V9zm4 12a2 2 0 0 1-2-2V9c0-.55.22-1.05.59-1.41L14.17 1l1.06 1.06c.27.27.44.64.44 1.05l-.03.32L14.69 8H21a2 2 0 0 1 2 2v2c0 .26-.05.5-.14.73l-3.02 7.05C19.54 20.5 18.83 21 18 21zm0-2h9.03L21 12v-2h-8.79l1.13-5.32L9 9.03z"/></svg>
            </button>
          
            <button class="md-feedback__icon md-icon" type="submit" title="This page could be improved" data-md-value="0">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 15V3h4v12zM15 3a2 2 0 0 1 2 2v10c0 .55-.22 1.05-.59 1.41L9.83 23l-1.06-1.06c-.27-.27-.44-.64-.44-1.06l.03-.31.95-4.57H3a2 2 0 0 1-2-2v-2c0-.26.05-.5.14-.73l3.02-7.05C4.46 3.5 5.17 3 6 3zm0 2H5.97L3 12v2h8.78l-1.13 5.32L15 14.97z"/></svg>
            </button>
          
        </div>
        <div class="md-feedback__note">
          
            <div data-md-value="1" hidden>
              
              
                
              
              
              
                
                
              
              Thanks for your feedback!
            </div>
          
            <div data-md-value="0" hidden>
              
              
                
              
              
              
                
                
              
              Thanks for your feedback! Help us improve this page by using our <a href="https://docs.google.com/forms/d/e/1FAIpQLSeHeph7Bf-BB8VOB63m3nDzo1_R_bM8zC_bwWfaTYrQAc0epQ/viewform?resourcekey=0-qNgLy5tTZZDA2jYDzFD9ag" target="_blank" rel="noopener">feedback form</a>.
            </div>
          
        </div>
      </div>
    </fieldset>
  </form>


                
              </article>
            </div>
          
          
  <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var labels=set.querySelector(".tabbed-labels");for(var tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script>

<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
    
      
      <nav class="md-footer__inner md-grid" aria-label="Footer" >
        
          
          <a href="../bootstrap/" class="md-footer__link md-footer__link--prev" aria-label="Previous: Bootstrap">
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
            </div>
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Previous
              </span>
              <div class="md-ellipsis">
                Bootstrap
              </div>
            </div>
          </a>
        
        
          
          <a href="../kueue-config/" class="md-footer__link md-footer__link--next" aria-label="Next: Kueue Config">
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Next
              </span>
              <div class="md-ellipsis">
                Kueue Config
              </div>
            </div>
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11z"/></svg>
            </div>
          </a>
        
      </nav>
    
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
</div>
      
        <div class="md-social">
  
    
    
    
    
      
      
    
    <a href="https://github.com/GoogleCloudPlatform/applied-ai-engineering-samples" target="_blank" rel="noopener" title="github.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill="currentColor" d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://cloud.google.com/" target="_blank" rel="noopener" title="cloud.google.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill="currentColor" d="M500 261.8C500 403.3 403.1 504 260 504 122.8 504 12 393.2 12 256S122.8 8 260 8c66.8 0 123 24.5 166.3 64.9l-67.5 64.9C270.5 52.6 106.3 116.6 106.3 256c0 86.5 69.1 156.6 153.7 156.6 98.2 0 135-70.4 140.8-106.9H260v-85.3h236.1c2.3 12.7 3.9 24.9 3.9 41.4"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
      <div class="md-progress" data-md-component="progress" role="progressbar"></div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "../../..", "features": ["announce.dismiss", "content.action.edit", "content.action.view", "content.code.annotate", "content.code.copy", "content.code.select", "content.footnote.tooltips", "content.tabs.link", "content.tooltips", "header.autohide", "navigation.expand", "navigation.footer", "navigation.indexes", "navigation.instant", "navigation.instant.prefetch", "navigation.instant.progress", "navigation.prune", "navigation.top", "navigation.tabs", "navigation.tabs.sticky", "navigation.tracking", "search.highlight", "search.share", "search.suggest", "toc.follow"], "search": "../../../assets/javascripts/workers/search.d50fe291.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../../../assets/javascripts/bundle.50899def.min.js"></script>
      
        <script src="../../../javascripts/mathjax.js"></script>
      
        <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
      
        <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
      
    
  </body>
</html>